{"layout":{"p":"layout","tf":"{\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = this.invokePartial(partials.menu,depth0,{\"name\":\"menu\",\"data\":data,\"helpers\":helpers,\"partials\":partials})) != null ? stack1 : \"\");\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper, options, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression, buffer = \n  \"<!DOCTYPE html>\\n<head>\\n    <meta charset=\\\"utf-8\\\">\\n    <title>InFood - \"\n    + alias3(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</title>\\n    <link rel='stylesheet' href='/stylesheets/style.css' />\\n    <link rel='stylesheet' href='/stylesheets/bootstrap-select.min.css' />\\n    <link href=\\\"stylesheets/bootstrap.min.css\\\" rel=\\\"stylesheet\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\">\\n    <script src=\\\"/javascripts/require.js\\\"></script>\\n    <script src=\\\"/javascripts/app.js\\\"></script>\\n    <script>\\n        var _apiToken = '\"\n    + alias3(((helper = (helper = helpers.apiToken || (depth0 != null ? depth0.apiToken : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"apiToken\",\"hash\":{},\"data\":data}) : helper)))\n    + \"';\\n    </script>\\n</head>\\n<body>\\n\";\n  stack1 = ((helper = (helper = helpers.notAuth || (depth0 != null ? depth0.notAuth : depth0)) != null ? helper : alias1),(options={\"name\":\"notAuth\",\"hash\":{},\"fn\":this.noop,\"inverse\":this.program(1, data, 0),\"data\":data}),(typeof helper === alias2 ? helper.call(depth0,options) : helper));\n  if (!helpers.notAuth) { stack1 = helpers.blockHelperMissing.call(depth0,stack1,options)}\n  if (stack1 != null) { buffer += stack1; }\n  return buffer + \"<div class=\\\"container\\\" style=\\\"width: 95%\\\">\\n    <div class=\\\"row\\\">\\n\"\n    + ((stack1 = this.invokePartial(partials.content,depth0,{\"name\":\"content\",\"data\":data,\"indent\":\"        \",\"helpers\":helpers,\"partials\":partials})) != null ? stack1 : \"\")\n    + \"    </div>\\n</div>\\n\\n</body>\\n</html>\";\n},\"usePartial\":true,\"useData\":true}","mt":1424853811000,"pt":["menu","content"]},"menu":{"p":"menu","tf":"{\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<nav class=\\\"navbar navbar-default navbar-static-top\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <!-- Brand and toggle get grouped for better mobile display -->\\n        <div class=\\\"navbar-header\\\">\\n            <button type=\\\"button\\\" class=\\\"navbar-toggle collapsed\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#bs-example-navbar-collapse-1\\\">\\n                <span class=\\\"sr-only\\\">Toggle navigation</span>\\n                <span class=\\\"icon-bar\\\"></span>\\n                <span class=\\\"icon-bar\\\"></span>\\n                <span class=\\\"icon-bar\\\"></span>\\n            </button>\\n            <a class=\\\"navbar-brand\\\" href=\\\"/index\\\">InFood</a>\\n        </div>\\n\\n        <!-- Collect the nav links, forms, and other content for toggling -->\\n        <div class=\\\"collapse navbar-collapse\\\" id=\\\"bs-example-navbar-collapse-1\\\">\\n            <ul id=\\\"links\\\" class=\\\"nav navbar-nav\\\">\\n                <li><a href=\\\"/index\\\">Заказы</a></li>\\n                <li><a href=\\\"#\\\">Меню</a></li>\\n                <li><a href=\\\"#\\\">Акции</a></li>\\n                <li><a href=\\\"#\\\">Рестораны</a></li>\\n                <li><a href=\\\"/users\\\">Пользователи</a></li>\\n            </ul>\\n            <ul class=\\\"nav navbar-nav navbar-right\\\">\\n                <li class=\\\"dropdown\\\">\\n                    <a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" role=\\\"button\\\" aria-expanded=\\\"false\\\"><i class=\\\"glyphicon glyphicon-user\\\"></i> &nbsp; \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.user : depth0)) != null ? stack1.login : stack1), depth0))\n    + \" <span class=\\\"caret\\\"></span></a>\\n                    <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                        <li><a href=\\\"#\\\">Профиль</a></li>\\n                        <li class=\\\"divider\\\"></li>\\n                        <li><a id=\\\"logout\\\" href=\\\"#\\\">Выход</a></li>\\n                    </ul>\\n                </li>\\n            </ul>\\n        </div>\\n    </div>\\n</nav>\\n<script>\\n    require([\\\"jquery\\\", \\\"safe\\\", \\\"api\\\", \\\"jquery-block\\\"], function ($, safe, api) {\\n        $(function () {\\n            $( \\\"#links\\\").find('li').each(function() {\\n                var l = $( this);\\n                l.removeClass('active');\\n                if (l.find('a').attr('href') == window.location.pathname)\\n                    l.addClass('active');\\n            });\\n            $('#logout').click(function(){\\n                safe.run(function (cb) {\\n                    api.call(\\\"core.logout\\\", cb);\\n                }, function (err) {\\n                    if (!err)\\n                        window.location.href = '/login';\\n                    else\\n                        appError(err);\\n                });\\n            });\\n        });\\n    });\\n</script>\";\n},\"useData\":true}","mt":1424849031000,"pt":[]},"content":{"p":"content","tf":"{\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"controls\\\">\\n    <div class=\\\"controlGroup\\\">\\n        <label class=\\\"control-label\\\">Роль:</label>\\n        <select id=\\\"roleSelect\\\" class=\\\"selectpicker\\\" data-width=\\\"180px\\\" data-style=\\\"btn-primary\\\">\\n            <option value=\\\"all\\\">Все</option>\\n        </select>\\n    </div>\\n    <div class=\\\"controlGroup\\\">\\n        <label class=\\\"control-label\\\">Город:</label>\\n        <select id=\\\"citySelect\\\" class=\\\"selectpicker\\\" data-width=\\\"180px\\\" data-style=\\\"btn-primary\\\">\\n            <option value=\\\"all\\\">Все</option>\\n        </select>\\n    </div>\\n    <div class=\\\"controlGroup\\\">\\n        <label class=\\\"control-label\\\">Ресторан:</label>\\n        <select id=\\\"restSelect\\\" class=\\\"selectpicker\\\" data-width=\\\"180px\\\" data-style=\\\"btn-primary\\\">\\n            <option value=\\\"all\\\">Все</option>\\n        </select>\\n    </div>\\n</div>\\n<div id=\\\"mixit\\\" class=\\\"mix-container\\\">\\n\\n</div>\\n<script>\\n    require([\\\"jquery\\\", \\\"safe\\\", \\\"api\\\", \\\"clitpl\\\", \\\"lodash\\\", \\\"jquery-block\\\", \\\"jquery-mixitup\\\", \\\"jquery-ui\\\", \\\"bootstrap-select\\\"], function ($, safe, api, tf, _) {\\n        $(function () {\\n            $(\\\".container\\\").block();\\n            var users = [];\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"менеджер\\\",\\n                сity: \\\"Рязань\\\",\\n                restaurant: \\\"Кафе 'Привет'\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"пользователь\\\",\\n                сity: \\\"Нижний Новгород\\\",\\n                restaurant: \\\"Кафе 'Привет'\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"менеджер\\\",\\n                сity: \\\"Москва\\\",\\n                restaurant: \\\"Жар-пицца\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"пользователь\\\",\\n                сity: \\\"Рязань\\\",\\n                restaurant: \\\"Жар-пицца\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"пользователь\\\",\\n                сity: \\\"Нижний Новгород\\\",\\n                restaurant: \\\"Жар-пицца\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"менеджер\\\",\\n                сity: \\\"Рязань\\\",\\n                restaurant: \\\"Пицца-шмица\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"менеджер\\\",\\n                сity: \\\"Владимир\\\",\\n                restaurant: \\\"Пицца-шмица\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"менеджер\\\",\\n                сity: \\\"Нижний Новгород\\\",\\n                restaurant: \\\"Пицца-шмица\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n            users.push({\\n                name: \\\"Иванов Иван Петрович\\\",\\n                role: \\\"пользователь\\\",\\n                сity: \\\"Москва\\\",\\n                restaurant: \\\"Ласточка\\\",\\n                phone: \\\"+79536745681\\\"\\n            });\\n\\n            var roles = {_sz:1};\\n            var restorants = {_sz:1};\\n            var cities = {_sz:1};\\n            var roleSelect = $('#roleSelect');\\n            var citySelect = $('#citySelect');\\n            var restSelect = $('#restSelect');\\n            _.forEach(users, function(user){\\n                if (!roles[user.role]){\\n                    roles[user.role] = roles._sz;\\n                    roleSelect.append($(\\\"<option></option>\\\")\\n                            .attr(\\\"value\\\",'.role-' + roles[user.role])\\n                            .text(user.role));\\n                    roles._sz++;\\n                }\\n                if (!cities[user.сity]){\\n                    cities[user.сity] = cities._sz;\\n                    citySelect.append($(\\\"<option></option>\\\")\\n                            .attr(\\\"value\\\",'.сity-' + cities[user.сity])\\n                            .text(user.сity));\\n                    cities._sz++;\\n                }\\n                if (!restorants[user.restaurant]){\\n                    restorants[user.restaurant] = restorants._sz;\\n                    restSelect.append($(\\\"<option></option>\\\")\\n                            .attr(\\\"value\\\",'.restaurant-' + restorants[user.restaurant])\\n                            .text(user.restaurant));\\n                    restorants._sz++;\\n                }\\n                user.roleId = 'role-' + roles[user.role];\\n                user.сityId = 'сity-' + cities[user.сity];\\n                user.restaurantId = 'restaurant-' + restorants[user.restaurant];\\n            });\\n            $('.selectpicker').on('change', function(){\\n                var filter = [];\\n                if (roleSelect.val()!='all')\\n                    filter.push(roleSelect.val());\\n                if (citySelect.val()!='all')\\n                    filter.push(citySelect.val());\\n                if (restSelect.val()!='all')\\n                    filter.push(restSelect.val());\\n                if (filter.length == 0){\\n                    filter = 'all';\\n                }else if (filter.length == 1){\\n                    filter = filter[0];\\n                } else{\\n                    filter = filter.join('');\\n                }\\n                console.log(filter);\\n                $(\\\"#mixit\\\").mixItUp('filter', filter);\\n            });\\n            if(window.browser.device) {\\n                $('.selectpicker').selectpicker('mobile');\\n            }else{\\n                $('.selectpicker').selectpicker();\\n            }\\n            tf.render('users-item', {users: users}, safe.sure(appError, function (text) {\\n                $(\\\"#mixit\\\").html(text).mixItUp({\\n                    animation: {\\n                        duration: 400\\n                    },\\n                    callbacks: {\\n                        onMixLoad: function () {\\n                            $(\\\".container\\\").unblock();\\n                        }\\n                    }\\n                });\\n                $('.mix').hover(\\n                        function () {\\n                            $(this).animate({'backgroundColor': 'rgba(14, 0, 79, 0.60)'}, 300);\\n                        },\\n                        function () {\\n                            $(this).animate({'backgroundColor': 'rgba(0, 79, 39, 0.60)'}, 300);\\n                        });\\n            }));\\n\\n        });\\n    });\\n</script>\";\n},\"useData\":true}","mt":1424860128000,"pt":[]},"hogan":{"v":4,"st":"layout"}}